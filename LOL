local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

WindUI:Notify({
    Title = "FIN V2 Hub启动中",
    Content = "尊贵的FIN用户 欢迎使用FIN脚本",
    Duration = 5,
})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character
local hum = Character.HumanoidRootPart
local PlayerGui = LocalPlayer.PlayerGui

local Window = WindUI:CreateWindow({
    Title = "FIN V2",
    Icon = "rbxassetid://129260712070622",
    IconThemed = true,
    Author = "作者:鑫晴",
    Folder = "CloudHub",
    Size = UDim2.fromOffset(300, 270),
    Transparent = true,
    Theme = "Dark",
    User = {
        Enabled = true,
        Callback = function() print("clicked") end,
        Anonymous = false
    },
    SideBarWidth = 200,
    -- HideSearchBar = true,
    ScrollBarEnabled = true,
    -- Background = "rbxassetid://13511292247", -- rbxassetid only
})

Window:EditOpenButton({
    Title = "FIN V2 Hub",
    Icon = "star",
    CornerRadius = UDim.new(0,16),
    StrokeThickness = 2,
    Color = ColorSequence.new(
        Color3.fromHex("FF0F7B"), 
        Color3.fromHex("F89B29")
    ),
    Draggable = true,
})

local Tab = Window:Tab({
    Title = "极速传奇",
    Icon = "zap",
    Locked = false,
})

local Toggle = Tab:Toggle({
    Title = "自动搜集红球",
    Desc = "FIN",
    Locked = false,
    Callback = function(state)
        autoCollectRedOrb = state
        
        if autoCollectRedOrb then
            if not Character or not hum then
                waitForCharacter()
            end
            
            redOrbConnection = game:GetService("RunService").Heartbeat:Connect(function()
                local args = {"collectOrb", "Red Orb", "City"}
                game:GetService("ReplicatedStorage").rEvents.orbEvent:FireServer(unpack(args))
            end)
        else
            if redOrbConnection then
                redOrbConnection:Disconnect()
                redOrbConnection = nil
            end
        end
    end
})

local Toggle2 = Tab:Toggle({
    Title = "自动搜集蓝球",
    Desc = "FIN",
    Locked = false,
    Callback = function(state)
        local autoCollectBlueOrb = state
        
        if autoCollectBlueOrb then
            if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                Character = waitForCharacter()
                hum = Character:WaitForChild("HumanoidRootPart")
            end
            
            if blueOrbConnection then
                blueOrbConnection:Disconnect()
            end
            
            blueOrbConnection = game:GetService("RunService").Heartbeat:Connect(function()
                local args = {"collectOrb", "Blue Orb", "City"}
                game:GetService("ReplicatedStorage").rEvents.orbEvent:FireServer(unpack(args))
            end)
        else
            if blueOrbConnection then
                blueOrbConnection:Disconnect()
                blueOrbConnection = nil
            end
        end
    end
})

local Toggle3 = Tab:Toggle({
    Title = "自动搜集黄球",
    Desc = "FIN",
    Locked = false,
    Callback = function(state)
        local autoCollectYellowOrb = state
        
        if autoCollectBlueOrb then
            if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                Character = waitForCharacter()
                hum = Character:WaitForChild("HumanoidRootPart")
            end
            
            if YellowOrbConnection then
               YellowOrbConnection:Disconnect()
            end
            
            YellowOrbConnection = game:GetService("RunService").Heartbeat:Connect(function()
                local args = { "collectOrb", "Yellow Orb", "City"}
                game:GetService("ReplicatedStorage").rEvents.orbEvent:FireServer(unpack(args))
            end)
        else
            if blueOrbConnection then
                blueOrbConnection:Disconnect()
                blueOrbConnection = nil
            end
        end
    end
})
